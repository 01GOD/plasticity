THIS WEEK:

  virtual void    InsertPoint( double t,  const MbCartPoint3D &, double ) = 0; // \ru Добавить точку \en Add a point 
  virtual void    RemovePoint( ptrdiff_t index );     
MATH_FUNC (MpGraph *) OuterContoursBuilder( const RPArray<MbCurve> &  curveList, 

remove fillet never seems to work 
lines need to be planar
fillet curves/contours
finish (right click) on circle/cylinder create puts the system in a weird state -- maybe shouldn't reject().
fillet has two points, F key bound twice
moving needs to have snapping
command validation (curves fail at beginning, as well as click away aborting lots of commands)
can't select control points in ortho view

BUG/CRASH:
1. add regular polygon
2. extrude
3. fillet variable top face
4. push/pull face down

# transaction history
- delete creator
- mute creator, etc.
- handle rebuild errors

# move keybindings outside of loop keybindings
- onPointerDown and on command (registry.addOne), store the viewport the pointer is over
- keep lastPointerEvent as a global on editor
- dispatch keyboard events to the target of lastPointerEvent

# c++ changes:
rename Id() .id
Cast should automatically take IsA();

redo all the basic commands (creating a box, etc.,) including the gui

audit array conversion is reserving and freeing elements:
    ::AddRefItems( curveArray );
    ::ReleaseItems( curveArray );
    and especially check if instantiated RPArray/etc. is freed altogether
    - convert MbCartPoint3D and Vector to isPOD

gizmos for primitives

tab to re-enter last command of object

auto save last object, auto lastGood

BUG:

onpointermove needs to take an async cb


it seems clear that scheduling stuff isn't entirely working; things can backlog somehow. all updating should automatically be scheduled.

both point picker and abstract gizmo take callbacks that should be async, because they call update which is potentially async
cylinder not working in many cases

BUGS for c3d
- crashes when extruding composite curve
- lots of push pull grow/shrink crashes
- figure 8 intersection hangs


FUTURE:

dialog box for settings
modifiers

test case for contour curve failing to extrude;
fillet curve thingy

right click repeat

box selection

bug: outlines broken by grid, axes missing

audit all doCommit to ensure visibility is set to true on failure;
  - perhaps the catch on Editor should call cancel

go through all factories and see if you can return more specific types from doCommit, like:
    -  Promise<visual.SpaceInstance<visual.Curve3D>> 

audit VisualModel to see if we can simplify the recursive raycasting. It was originally introduced for LODs, but maybe it can be done with deep raycasting and hit filtering.

--

Viewport week:
- keybindings to create/remove viewports

Gizmo week:
- point-picker style move/etc.
- Dialogs

Cleanup week:
- Lint to require return values of fn's.
- add dispose methods anywhere there is signal.add or .addEventListener

Snap week:
- Prettier snap display
- More snaps
- alt/whatever to disable snaps

File save / open

expose selection to console as well as commands with editor already injected.
select method should be more direct
change selection mode 123 keys